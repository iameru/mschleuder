{% extends 'base.html' %}
{% from 'macros.html' import number_input %}
{% set title = product.name + ' verteilen' %}

{% block scripts %}
{% include 'products/distribute/dist.js.html' %}
{% endblock %}

{% block content %}



<div class="columns is-multiline" id="dist-stations-area">

  <div class="column is-12">
    <div class="level">
      {% if product.recent_distribution %}
      <div class="level-left">
        <div class="level-item">zuletzt</div>
        <div class="level-item">ğŸ“… {{ product.recent_distribution }}</div>
      </div>
      {% endif %}
      {% if product.info %}
      <div class="level-right">

        <div class="level-item">ğŸ›ˆ {{ product.info }}</div>

      </div>
      {% endif %}
    </div>
  </div>



  <div class="column is-12">
  <div class="columns">

    <div class="column is-4">{{ number_input(product.amount, label="Input", id="dist-input-field") }}</div>
      <div class="column is-4">
        <div class="field is-grouped is-grouped-centered">
          <div class="control">
            <button class="button is-primary"
                    onclick="distribute('even')"
                    >gleich</button>
          </div>
          <div class="control">
            <button class="button is-primary"
                    onclick="distribute('half')"
                    >halbe halb</button>
          </div>
          <div class="control">
            <button class="button is-primary"
                    onclick="distribute('none')"
                    >halbe nix</button>
          </div>
        </div>
      </div>
      <div class="column is-4">
      {% if product.by_piece %}
        <div class="columns is-centered">
          <div class="column is-4 has-text-centered bordered">
            <div class="row is-size-4">Rest</div>
            <div class="row"><p class="is-size-3" id="dist-rest-field">ğ„‚</p></div>

          </div>
        </div>
      {% endif %}
      </div>
    </div>
  </div>

{% for station in stations %}

<div class="column is-4"
     id="dist-station-{{station.id}}">
<div class="box">

<div class="level">
  <div class="level-left">
    <div class="level-item">{{ station.name }}</div>
  </div>

  <div class="level-right" id="small-info">
    <div class="level-item">ğŸ‘¥{{ station.members_full + station.members_half }}
    â— {{ station.members_full }}
    â—‘ {{station.members_half }}</div>
  </div>
</div>

{# share for all station members #}
<div class="columns">
 <div class="column is-4">
   <p id="dist-station-total-{{ station.id }}">/</p>
   <p>ğŸ‘¥</p>
 </div>
 <div class="column is-4">
  {{ number_input("", label="â—", id="dist-station-full-" ~ station.id ) }}
 </div>
 <div class="column is-4">
  {{ number_input("", label="â—‘", id="dist-station-half-" ~ station.id ) }}
 </div>
</div>

{# share of a single member #}
<div class="columns">
  <div class="column">
    <div class="level">
       <div class="level-left">
         <div class="level-item">â—</div>
         <div class="level-item"><p id="dist-station-single-full-{{ station.id }}"></p></div>
       </div>
       <div class="level-right">
         <div class="level-item"><p id="dist-station-single-half-{{ station.id }}"></p></div>
         <div class="level-item">â—‘</div>
       </div>
    </div>
  </div>
</div>


</div>{# box #}
</div>{# column #}
{% endfor %}

</div>

{% endblock %}
